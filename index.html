<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Juguemos Huevadas</title>
  <!-- Descripción para SEO -->
  <meta name="description" content="Prototipo web de dinámicas de fiesta con cartas, retos, turnos y temporizador.">
  <!-- Fuentes y estilos -->
  <link rel="stylesheet" href="styles/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Mensaje si JavaScript está deshabilitado -->
  <noscript>
    <p>Para disfrutar de la experiencia completa, habilita JavaScript en tu navegador.</p>
  </noscript>

  <!-- Contenedor centralizado y semitransparente -->
  <div id="app" class="contenedor">
    
    <!-- Cabecera principal con título y subtítulo -->
    <header class="header-principal">
      <h1>Juguemos Huevadas</h1>
      <p class="subtitle">¡Diversión garantizada!</p>
    </header>

    <!-- Panel de registro de jugadores -->
    <section id="registro-section" class="panel" aria-labelledby="titulo-registro">
      <h2 id="titulo-registro">Registro de Jugadores</h2>
      <form id="registro-form" novalidate>
        <!-- Agrupa los controles de entrada -->
        <div class="grupo-input">
          <label for="nombre-jugador" class="sr-only">Nombre del jugador</label>
          <input
            type="text"
            id="nombre-jugador"
            placeholder="Nombre del jugador"
            aria-describedby="error-nombre"
            required
            autofocus>
          <button type="button" id="agregar-jugador" class="boton-secundario">
            Agregar
          </button>
        </div>
        <!-- Mensaje de error accesible -->
        <div id="error-nombre" class="mensaje-error" role="alert"></div>
        <!-- Lista dinámica de jugadores -->
        <div class="lista-jugadores">
          <h3>Jugadores:</h3>
          <ul id="jugadores-ul" aria-live="polite"></ul>
        </div>
        <!-- Botón para comenzar el juego -->
        <button type="button" id="comenzar-juego" class="boton-primario">
          Comenzar Juego
        </button>
      </form>
    </section>

    <!-- Panel del juego, oculto hasta empezar -->
    <section id="juego-section" class="panel oculto" aria-hidden="true">
      <!-- Indicador de turno y temporizador -->
      <header class="cabecera-juego">
        <div id="turno-badge" class="badge-turno" role="status" aria-live="polite">
          Turno de: <span id="jugador-actual">Jugador 1</span>
        </div>
        <div class="temporizador-contenedor" aria-label="Temporizador">
          <div id="barra-temporizador" class="barra-temporizador"></div>
          <div id="texto-temporizador" class="texto-temporizador">30</div>
        </div>
      </header>

      <!-- Área de la carta y botón para mostrarla -->
      <div class="contenido-juego">
        <div class="contenedor-carta" role="region" aria-label="Carta del juego">
          <div class="carta" id="carta" role="button" aria-expanded="false" tabindex="0">
            <div class="carta-inner">
              <!-- Lado frontal de la carta -->
              <div class="carta-frontal">
                <div class="diseno-carta">
                  <h2>Juguemos Huevadas</h2>
                </div>
              </div>
              <!-- Lado trasero con indicador de reto -->
              <div class="carta-trasera">
                <div class="contenido-carta">
                  <div class="titulo-carta" id="titulo-carta">A</div>
                  <div class="texto-carta" id="texto-carta">
                    Presiona “Mostrar carta” para ver el reto.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Botón que dispara la función voltearCarta() -->
        <button id="mostrar-carta" class="boton-primario">
          Mostrar Carta
        </button>
      </div>

      <!-- Enlaces y controles al pie del juego -->
      <footer class="pie-juego">
        <button id="volver-registro" class="boton-secundario">
          Volver al Registro
        </button>
      </footer>
    </section>

    <!-- Pie de página con créditos -->
    <footer class="footer-principal">
      <p>Equipo “Juguemos Huevadas” – Ingeniería de Software ESPE © 2025</p>
    </footer>
  </div>

  <!-- Audio preload metadata para efectos -->
  <audio id="sonido-voltear" preload="metadata">
    <source src="assets/flip.mp3" type="audio/mpeg">
    Tu navegador no soporta audio.
  </audio>
  <audio id="sonido-temporizador" preload="metadata">
    <source src="assets/timer-end.mp3" type="audio/mpeg">
    Tu navegador no soporta audio.
  </audio>

  <!-- Módulos ES6 cargando lógica y componentes -->
  <script type="module" src="js/api/indexeddb.js"></script>
  <script type="module" src="js/components/cartaDisplay.js"></script>
  <script type="module" src="js/components/temporizador.js"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
